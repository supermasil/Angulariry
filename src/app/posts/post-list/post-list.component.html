<mat-card>
  <form [formGroup]='' class="search-bar">
    <mat-form-field>
      <mat-label>Search here</mat-label>
      <input matInput placeholder="Search anything, really">
    </mat-form-field>
  </form>
</mat-card>
<mat-spinner *ngIf='isLoading'></mat-spinner>
<br>
<mat-accordion multi='true' *ngIf='posts.length > 0 && !isLoading'>
  <mat-expansion-panel *ngFor='let post of posts'>

    <mat-expansion-panel-header>
      {{ post.title }}
    </mat-expansion-panel-header>
    <ng-template matExpansionPanelContent>
      <div class='post-image'>
        <img [src]='post.imagePath' [alt]='post.title'>
      </div>
      <p>{{ post.content }}</p>
    </ng-template>


    <mat-action-row>
      <div *ngIf="userIsAuthenticated && userId === post.creator;">
        <a mat-button color='primary' [routerLink]="['/edit', post.id]" >Edit</a>
        <button mat-button color='warn' (click)='onDelete(post.id)'>Delete</button>
      </div>

      <div *ngIf="userIsAuthenticated && userId !== post.creator">
        <div *ngIf="!subscribedPosts.includes(post.id); else subscribed">
          <button mat-raised-button color='primary' (click)='onSubscribe(post.id)'>Subscribe</button>
        </div>

        <ng-template #subscribed>
          <button mat-raised-button color='warn' (click)='onUnSubscribe(post.id)'>Unsubscribe</button>
        </ng-template>
      </div>

    </mat-action-row>
  </mat-expansion-panel>
</mat-accordion>

<mat-paginator [length]='totalPosts' [pageSize]='postsPerPage' [pageSizeOptions]='pageSizeOptions' (page)='onChangedPage($event)'></mat-paginator>
<p class='info-text mat-body-1' *ngIf='posts.length <= 0 && !isLoading'>No posts added yet</p>
